<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<!-- controls : 재생 컨트롤바 보이기 -->
	<!-- <audio id="myAudio" controls="controls" autoplay="autoplay" loop="loop"> -->
	<audio id="myAudio">
		<source src="exid.mp3" type="audio/mpeg" />
	</audio>
	<div>
		<button id="back">←</button>
		<button id="play">▶</button>
		<button id="for">→</button>
		<span id="cTime">0:00</span>
		<span id="debug"></span>
		<canvas id="myCanvas" width="500" height="10" style="border: 1px solid blue; padding: 1px;"></canvas>
		<button id="mute">♬</button>
		<input type="range" id="vol" min="0" max="1" step="0.1" value="0.5"/>
	</div>
	
	<script type="text/javascript">
		var debug = document.querySelector("#debug");
		var cTime = document.querySelector("#cTime");
		var audio = document.querySelector("#myAudio");
		var play = document.querySelector("#play");
		var mute = document.querySelector("#mute");
		var vol = document.querySelector("#vol");
		var back = document.querySelector("#back");
		var forw = document.querySelector("#for");
		var canvas = document.querySelector("#myCanvas");
		
		back.onclick = function(){
			audio.currentTime -= 10;
		};
		
		forw.onclick = function(){
			audio.currentTime += 10;
		};
		
		vol.onchange = function(){
			audio.volume = vol.value;
		};
		
		mute.onclick = function(){
			audio.muted = !audio.muted;
			if(audio.muted)
			{
				mute.innerHTML = "◐";
			}else
			{
				mute.innerHTML = "♬";
			}
		};
		
		play.onclick = function(){
			if(audio.paused)
			{
				audio.play();
				play.innerHTML = "∥";
			}
			else
			{
				audio.pause();				
				play.innerHTML = "▶";
				// audio.paused = true(중지), false(재생중)
			}
		};
		
		audio.addEventListener("timeupdate", function(){
			var currentTime = parseInt(audio.currentTime);
			var time = parseInt(currentTime / 60) + ":" + pad(currentTime % 60);
			cTime.innerHTML = time;
			debug.innerHTML = " / " + parseInt(audio.duration / 60) + ":" + pad(parseInt(audio.duration % 60));	
			
			// 캔버스에 진행률 표시하기
			var cWidth = Math.round(currentTime) / audio.duration * canvas.clientWidth;
			var ctx = canvas.getContext("2d");
			// 캔버스를 한번 지우고 다시 그림
			ctx.clearRect(0, 0, canvas.clientWidth, canvas.clientHeight);
			ctx.fillStyle = "green";
			if(cWidth > 0)
			{
				ctx.fillRect(0, 0, cWidth, canvas.clientHeight);
			}
		});
		
		canvas.addEventListener("click", function(e){
			// 마우스 클릭된 X좌표
			audio.currentTime = e.offsetX / canvas.clientWidth * audio.duration;
		});
		
		function pad(time)
		{
			return time < 10 ? "0" + time : time;
		}
	</script>
</body>
</html>