<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="../framework.js"></script>
</head>
<body>
	<h2>JSON Data 처리</h2>
	<hr />
	<textarea rows="10" cols="80" id="debug"></textarea>
	<br>
	<button id="clearBtn">초기화</button>
	<button id="sendBtn">전송</button>
	
	<script type="text/javascript">
		$("#clearBtn").click(function(){
			$("#debug").val("");
		});
		$("#sendBtn").click(function(){
			var xhr = new XMLHttpRequest();
			xhr.onreadystatechange = function(){
				if(xhr.readyState == 4){
					if(xhr.status == 200)
					{
						//var result = eval(xhr.responseText);
						var result = JSON.parse(xhr.responseText);
						
						$("#debug").val("회원: " + result.length + "\n");
						for(var i = 0 ; i < result.length ; i++)
						{
							var m = result[i];
							$("#debug").val($("#debug").val() + "이름: " + m.name + ", 나이: " + m.age + "\n");
						}
					}
				}
			};
			xhr.open("get", "/javascript-basic/exam06", true);
			xhr.send(null);
		});
	</script>
</body>
</html>