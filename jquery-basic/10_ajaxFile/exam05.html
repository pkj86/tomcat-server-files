<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="../js/jquery-3.1.0.js"></script>
</head>
<body>
	<form action="/jquery-basic/ajaxfile/exam01" id="ajaxForm" method="post" enctype="multipart/form-data">
		<input type="text" name="msg" /><br>
		<input type="file" name="attachFile" multiple="multiple" />
		<button type="button">업로드</button>
	</form>
	
	<script type="text/javascript">
		$("button").click(function(){
			var files = $("[name=attachFile]")[0].files;
			
			var fd = new FormData();
			fd.append("msg", $("[name=msg]").val());
			for(var i = 0 ; i < files.length ; i++)
			{
				fd.append("attachFile" + i, files[i]);				
			}
			
			
			$.ajax({
				url: "/jquery-basic/ajaxfile/exam02",
				data: fd,
				type: "post",
				processData: false,	// 기본값 true, false = 데이터를 name=value 형식으로 보내지 말것
				contentType: false,
				success: function(){
					alert("파일 업로드 성공");
				}
			});
		});
	</script>
</body>
</html>